---
import GithubIcon from "../icons/Github.astro";
import NextjsIcon from "../icons/Nextjs.astro";
import HTMLIcon from "../icons/HTML.astro";
import TailwindCSSIcon from "../icons/TailwindCSS.astro";
import ReactIcon from "../icons/React.astro";
import Storybook from "../icons/Storybook.astro";
import WebIcon from "../icons/Web.astro";
import TypescriptIcon from "../icons/Typescript.astro";
import NodejsIcon from "../icons/Nodejs.astro";
import ExpressIcon from "../icons/Express.astro";
import PostgreSQLIcon from "../icons/PostgreSQL.astro";
import PrismaIcon from "../icons/Prisma.astro";
import ViteIcon from "../icons/Vite.astro";
import LinkButton from "./LinkButton.astro";
import Carrousel from "./Carrousel.astro";
import type { ImageMetadata } from "astro";

const currentLocale = Astro.currentLocale || "en";

const TAGS = {
  NEXT: {
    name: "Next.js",
    class: "bg-[#003159] text-white",
    icon: NextjsIcon,
  },
  TAILWIND: {
    name: "TailwindCSS",
    class: "bg-[#003159] text-white",
    icon: TailwindCSSIcon,
  },
  REACT: {
    name: "React",
    class: "bg-[#003159] text-white",
    icon: ReactIcon,
  },
  TYPESCRIPT: {
    name: "Typescript",
    class: "bg-[#003159] text-white",
    icon: TypescriptIcon,
  },
  HTML: {
    name: "HTML5",
    class: "bg-[#003159] text-white",
    icon: HTMLIcon,
  },
  NODEJS: {
    name: "Node.js",
    class: "bg-[#003159] text-white",
    icon: NodejsIcon,
  },
  EXPRESS: {
    name: "Express",
    class: "bg-[#003159] text-white",
    icon: ExpressIcon,
  },
  POSTGRESQL: {
    name: "PostgreSQL",
    class: "bg-[#003159] text-white",
    icon: PostgreSQLIcon,
  },
  PRISMA: {
    name: "Prisma ORM",
    class: "bg-[#003159] text-white",
    icon: PrismaIcon,
  },
  VITE: {
    name: "Vite",
    class: "bg-[#003159] text-white",
    icon: ViteIcon,
  },
};

interface Tag {
  name: string;
  class: string;
  icon: typeof NextjsIcon | typeof TailwindCSSIcon;
}

interface ProjectCardProps {
  title: string;
  description?: string;
  link?: string;
  github?: string;
  image: string | (ImageMetadata | string)[];
  tags?: Tag[];
  app: boolean;
}

const PROJECTS: ProjectCardProps[] = [
  {
    title: "Notes App - Full Stack Challenge",
    description:
      currentLocale === "es"
        ? `Aplicación full-stack de gestión de notas con categorización construida en respuesta a un desafío técnico en 3 días con ayuda de agentes de IA. Implementé arquitectura en capas (Controllers → Services → Repositories), gestión de estado con Context API, optimistic UI updates, y sistema many-to-many entre notas y categorías. Diseño responsive mobile-first con tema dark/light automático, accesibilidad WCAG, y deploy multi-plataforma (Railway + Netlify + Neon PostgreSQL).`
        : `Full-stack note management application with categorization built in response to a technical challenge in 3 days with AI agent assistance. I implemented layered architecture (Controllers → Services → Repositories), state management with Context API, optimistic UI updates, and many-to-many system between notes and categories. Mobile-first responsive design with automatic dark/light theme, WCAG accessibility, and multi-platform deployment (Railway + Netlify + Neon PostgreSQL).`,
    link: "https://notesappfe.netlify.app/",
    image: [
      "/projects/NotesApp/NotesMainDark.png",
      "/projects/NotesApp/NotesMainLight.png",
      "/projects/NotesApp/NotesResponsiveDark.png",
      "/projects/NotesApp/NotesResponsiveLight.png",
    ],
    tags: [
      TAGS.TYPESCRIPT,
      TAGS.REACT,
      TAGS.NODEJS,
      TAGS.EXPRESS,
      TAGS.POSTGRESQL,
      TAGS.PRISMA,
      TAGS.TAILWIND,
    ],
    app: false,
  },
  {
    title: "SeCo TMS",
    description:
      currentLocale === "es"
        ? `Plataforma web desarrollada con React.js, Next.js y TailwindCSS, diseñada para la gestión integral de operaciones logísticas y transporte. Se migró de un programa en AS400 a una aplicación web moderna y escalable para asignación, control y monitoreo de envíos de mercadería entre diferentes clientes y transportistas. Grupo de desarrollo colaborativo de 15 personas utilizando metodologías ágiles (Scrum).`
        : `Web platform developed with React.js, Next.js, and TailwindCSS, designed for comprehensive management of logistics and transportation operations. Migrated from an AS400 program to a modern and scalable web application for assignment, control, and monitoring of merchandise shipments between different clients and carriers. Collaborative development group of 15 people under agile methodologies (Scrum).`,
    link: "https://library-fcantora.vercel.app/",
    github: "https://github.com/FCantora/library",
    image: [
      "/projects/Seco/SecoLogin.png",
      "/projects/Seco/SecoTable.png",
      "/projects/Seco/SecoDetail.png",
      "/projects/Seco/SecoDrawer.png",
      "/projects/Seco/SecoResponsiveTable.png",
      "/projects/Seco/SecoResponsiveDetail.png",
      "/projects/Seco/SecoResponsiveDrawer.png",
    ],
    tags: [TAGS.NEXT, TAGS.TAILWIND, TAGS.TYPESCRIPT, TAGS.REACT, TAGS.HTML],
    app: false,
  },
  {
    title: "Método John Mojica",
    description:
      currentLocale === "es"
        ? `Construcción de una plataforma de e-learning de un instructor de peluquería para que dejara de impartir
clases individuales y, en cambio, licenciar su método de enseñanza propio a peluquerías en todo el país.
Lideré la arquitectura y el desarrollo frontend. Tomé decisiones clave sobre el stack tecnológico y la
estructura del proyecto. La plataforma, aunque en desarrollo, ya está atrayendo socios potenciales y está
posicionada para un lanzamiento en 2026, validando la solución como un modelo de negocio escalable.`
        : `Built an e-learning platform for a hairstyling instructor to transition from giving individual classes to
licensing his own teaching method to hair salons nationwide. Led the frontend architecture and
development. Made key decisions regarding the technology stack and project structure. The platform,
though still under development, is already attracting potential partners and is positioned for a 2026
launch, validating the solution as a scalable business model.`,
    image: [
      "/projects/JohnMojica/JohnLogin.png",
      "/projects/JohnMojica/JohnHome.png",
      "/projects/JohnMojica/JohnExam.png",
      "/projects/JohnMojica/JohnMenu.png",
    ],
    tags: [TAGS.TYPESCRIPT, TAGS.NEXT, TAGS.HTML, TAGS.TAILWIND, TAGS.REACT],
    app: false,
  },
];
---

<section class="flex flex-col gap-y-16">
  {
    PROJECTS.map(({ image, title, description, tags, link, github, app }) => (
      <article>
        <h3 class="mb-2 text-2xl font-semibold text-yellow-200">{title}</h3>
        <p class="mb-4 text-pretty text-lg">{description}</p>
        <ul class="mb-4 flex flex-wrap gap-x-4 gap-y-2 sm:flex-wrap md:flex-row lg:flex-row">
          {tags &&
            tags.map((tag) => {
              return (
                <li>
                  <span class={`flex gap-x-2 rounded-full text-xs ${tag.class} px-2 py-1`}>
                    <tag.icon class="size-4" />
                    {tag.name}
                  </span>
                </li>
              );
            })}
        </ul>
        {typeof image === "string" ? (
          <div class="mx-auto flex max-w-2xl">
            <div class="relative w-full">
              <div class="relative z-20 h-64 overflow-hidden rounded-lg sm:h-80 xl:h-96 2xl:h-[480px]">
                <img
                  src={image}
                  class="relative left-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 object-cover"
                  alt={`Screenshot of ${title}`}
                />
              </div>
            </div>
          </div>
        ) : (
          <Carrousel images={image} />
        )}
        <footer class="mt-2 flex justify-center gap-x-4">
          {github && (
            <LinkButton link={github}>
              <GithubIcon class="mr-1 size-6" />
              {currentLocale === "es" ? "Ver código fuente" : "Watch source code"}
            </LinkButton>
          )}
          {link && (
            <LinkButton link={link}>
              {app === true ? (
                <>
                  <LinkButton class="mr-1 size-6" />
                  {currentLocale === "es" ? "Descargar app Android" : "Download Android App"}
                </>
              ) : github ? (
                <>
                  <Storybook class="mr-1 size-6" />
                  {currentLocale === "es" ? "Ir a la librería" : "Go to library"}
                </>
              ) : (
                <>
                  <WebIcon class="mr-1 size-6" />
                  {currentLocale === "es" ? "Ir a la web" : "Go to web"}
                </>
              )}
            </LinkButton>
          )}
        </footer>
      </article>
    ))
  }
</section>
